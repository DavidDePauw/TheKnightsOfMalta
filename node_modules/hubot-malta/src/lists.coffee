# Description:
#   Kingdon's callbacks
#
# Dependencies:
#   None
#
# Configuration:
#   None
#
# Commands:
#   tebot sup dawg - Receive a pug
#   hubot pug bomb N - get N pugs

module.exports = (robot) ->

  robot.respond /list users/i, (msg) ->
    users = robot.brain.get "users"
    users = {} if users == null
    unless Object.keys(users).length == 0
      for username, fields of users
        msg.send "@#{username}: #{fields.language}"

  robot.respond /list( project)? ideas/i, (msg) ->
    ideas = robot.brain.get "ideas"
    ideas = [] if ideas == null
    msg.send "Say '#{robot.name} idea #N' if you want to join a team"
    unless ideas.length == 0
      for obj, i in ideas
        msg.send "##{i+1}: #{obj.idea}"

  robot.respond /idea #(\d+)/i, (res) ->
    n = res.match[1]
    ideas = robot.brain.get "ideas"
    idea = ideas[n+1]
    res.send "Idea #{n+1}: talk to #{idea.username}"
    
